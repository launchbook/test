<!-- ğŸŒŸ LaunchBook AI â€“ Final Premium Generator Layout -->
<div class="max-w-7xl mx-auto px-4 py-10">
  <!-- ğŸ’ Header -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 text-transparent bg-clip-text">LaunchBook AI â€“ Premium eBook Generator</h1>
    <div class="flex gap-4 items-center">
      <div class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-semibold">75 / 1000 credits</div>
      <button class="text-sm font-medium hover:underline">ğŸ‘¤ Profile</button>
      <button class="bg-purple-600 text-white px-4 py-2 rounded-xl shadow hover:bg-purple-700">Upgrade to Pro</button>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- ğŸš€ Left Generator Panel -->
    <div class="space-y-6">
      <div>
        <input type="url" class="w-full px-4 py-3 border rounded-xl" placeholder="Paste your blog/article URL here..." />
      </div>
      <div class="flex gap-4">
        <label class="flex items-center gap-2">
          <input type="radio" name="output_format" value="pdf" checked /> PDF
        </label>
        <label class="flex items-center gap-2">
          <input type="radio" name="output_format" value="epub" /> EPUB
        </label>
        <label class="flex items-center gap-2">
          <input type="radio" name="output_format" value="kindle" disabled class="opacity-50" /> Kindle (Pro/Agency only)
        </label>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="text" class="w-full px-4 py-2 border rounded-xl" placeholder="Author Name" />
        <input type="text" class="w-full px-4 py-2 border rounded-xl" placeholder="Book Title" />
      </div>
      <textarea rows="2" class="w-full px-4 py-2 border rounded-xl" placeholder="Brief description..."></textarea>
      <textarea rows="2" class="w-full px-4 py-2 border rounded-xl" placeholder="AI instruction or style preference..."></textarea>

      <!-- ğŸ–¼ï¸ Book Cover Options -->
      <div class="space-y-2">
        <label class="text-sm font-semibold text-gray-700">ğŸ“• Book Cover</label>
        <img id="cover_preview" src="/cover-placeholder.jpg" class="w-full max-w-md rounded-xl border shadow-md" />
        <div class="flex gap-3 mt-2">
          <button class="bg-red-100 text-red-600 px-3 py-1 rounded">âŒ Delete</button>
          <button class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded">â™»ï¸ Regenerate</button>
          <label for="cover_upload" class="bg-blue-100 text-blue-700 px-3 py-1 rounded cursor-pointer">ğŸ“¤ Upload</label>
          <input id="cover_upload" type="file" accept="image/*" class="hidden" />
        </div>
      </div>

      <!-- ğŸ¯ Audience / Tone / Purpose -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <select class="w-full px-4 py-2 border rounded-xl">
          <option>Audience</option><option>Students</option><option>Entrepreneurs</option>
        </select>
        <select class="w-full px-4 py-2 border rounded-xl">
          <option>Tone</option><option>Friendly</option><option>Professional</option>
        </select>
        <select class="w-full px-4 py-2 border rounded-xl">
          <option>Purpose</option><option>Lead Magnet</option><option>Educational</option>
        </select>
      </div>

      <!-- ğŸ’¡ Advanced Formatting (Universal Layout Control) -->
     <!-- ğŸ¨ Manual Formatting Controls -->
<div class="bg-gray-50 border rounded-xl p-4 space-y-4 mb-4">
  <h3 class="text-md font-semibold text-indigo-600">ğŸ›ï¸ Formatting</h3>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <select id="font_family" class="border rounded px-2 py-1">
      <option value="Inter">Inter</option>
      <option value="Roboto">Roboto</option>
      <option value="Georgia">Georgia</option>
      <option value="Comic Sans MS">Comic Sans MS</option>
    </select>
    <select id="headline_size" class="border rounded px-2 py-1">
      <option value="22pt">22pt Headline</option>
      <option value="24pt">24pt</option>
      <option value="26pt">26pt</option>
    </select>
    <select id="text_size" class="border rounded px-2 py-1">
      <option value="14pt">14pt Text</option>
      <option value="15pt">15pt</option>
      <option value="16pt">16pt</option>
    </select>
    <select id="line_spacing" class="border rounded px-2 py-1">
      <option value="1.5">Line 1.5</option>
      <option value="1.8">1.8</option>
      <option value="2">2</option>
    </select>
    <select id="text_align" class="border rounded px-2 py-1">
      <option value="left">Left</option>
      <option value="center">Center</option>
      <option value="justify">Justify</option>
    </select>
    <input id="margin_top" class="border rounded px-2 py-1" placeholder="Top Margin" value="1in" />
    <input id="margin_bottom" class="border rounded px-2 py-1" placeholder="Bottom Margin" value="1in" />
    <input id="margin_left" class="border rounded px-2 py-1" placeholder="Left Margin" value="1in" />
    <input id="margin_right" class="border rounded px-2 py-1" placeholder="Right Margin" value="1in" />
  </div>
</div>


<div class="flex gap-4 mt-4">
  <button onclick="saveFormattingSettings()" class="bg-gray-700 text-white px-4 py-2 rounded">ğŸ’¾ Save Formatting</button>
  <button onclick="resetFormattingSettings()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded">ğŸ”„ Reset</button>
</div>

      <!-- ğŸ”— API & Affiliate CTA -->
      <input class="w-full px-4 py-2 border rounded-xl" placeholder="Use your own OpenAI API Key (optional)" />
      <div class="space-y-2">
        <label class="text-sm font-semibold">Affiliate URL & Keywords</label>
        <input type="url" class="w-full px-4 py-2 border rounded-xl" placeholder="Affiliate Link" />
        <input type="text" class="w-full px-4 py-2 border rounded-xl" placeholder="Trigger Keywords (comma separated)" />
      </div>

     <!-- ğŸ¨ Template Button + Generate -->
<div class="flex flex-wrap gap-4 mt-4">
  <button onclick="openTemplateModal()" class="bg-indigo-600 text-white px-4 py-2 rounded-xl">ğŸ¨ Choose Template</button>
  <button class="bg-green-600 text-white px-4 py-2 rounded-xl">ğŸš€ Generate</button>
  <button class="bg-gray-600 text-white px-4 py-2 rounded-xl">ğŸ’¾ Save Formatting</button>
</div>

<!-- ğŸ¨ Template Picker Modal -->
<div id="templateModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
  <div class="bg-white max-w-4xl mx-auto mt-20 p-6 rounded-xl shadow-lg relative">
    <h2 class="text-xl font-bold mb-4 text-indigo-600">ğŸ“š Choose an eBook Template</h2>

    <!-- â¬‡ï¸ Add the card here -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="templateCardContainer">
      
      <!-- ğŸ’¡ Example Template Card (Add more as needed) -->
      <div class="template-card bg-white rounded-xl p-4 border shadow-sm" data-template-path="kids/the-day-the-moon-smiled.json">
        <img src="/img/kids/moon-smile.jpg" class="w-full h-40 object-cover rounded-lg mb-3" />
        <h3 class="text-lg font-semibold text-purple-600">The Day the Moon Smiled</h3>
        <p class="text-sm text-gray-600 mb-2">A storytelling adventure template for children</p>
        <button class="apply-template bg-purple-600 text-white px-3 py-1 rounded">Use This Template</button>
      </div>

    </div>

    <!-- Close Button -->
    <button class="absolute top-3 right-4 text-gray-500 hover:text-red-500 text-xl" onclick="closeTemplateModal()">Ã—</button>
  </div>
</div>


    <!-- ğŸ”§ Preview Block Template -->
<div class="ebook-section border rounded-xl p-4 space-y-2 shadow-sm bg-gray-50" data-section-id="0">
  <input class="section-title text-lg font-semibold w-full border-b" value="Chapter 1: Introduction" />
  <input class="section-headline text-md text-gray-800 w-full border-b" value="The Power of Focus" />
  <textarea class="section-body w-full h-32 border rounded p-2 resize-y">
Welcome to the first chapter of your ebook. This section covers the basics of staying focused.
  </textarea>

  <img class="section-image w-full rounded-xl max-h-64 object-cover" src="/placeholder.jpg" />

  <div class="flex justify-between text-sm text-gray-600 pt-2">
    <div class="flex gap-3">
      <button class="regen-text text-indigo-600 hover:underline">â™»ï¸ Regenerate Text</button>
      <button class="regen-image text-purple-600 hover:underline">ğŸ–¼ï¸ Regenerate Image</button>
    </div>
    <div class="flex gap-2">
      <button class="replace-image text-blue-600 hover:underline">ğŸ“¤ Replace Image</button>
      <button class="delete-section text-red-600 hover:underline">âŒ Delete</button>
    </div>
  </div>
</div>
<!-- â• Add Section -->
<button class="w-full border rounded-xl py-3 text-center hover:bg-gray-100 add-section-button">â• Add New Section</button>


document.getElementById("save_formatting_btn").addEventListener("click", saveFormattingToSupabase);
<script>
  function openTemplateModal() {
    document.getElementById("templateModal").classList.remove("hidden");
  }
  function closeTemplateModal() {
    document.getElementById("templateModal").classList.add("hidden");
  }
</script>
